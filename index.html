<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Most Days Feel Small - Life Reflection</title>
    
    <!-- Google Fonts CDN - Premium Free Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800;900&family=Montserrat:wght@300;400;500;700&family=Poppins:wght@300;400;600;700;800&family=Raleway:wght@400;500;700&family=Bodoni+Moda:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="heart-fevicon.png">

    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background: #ffffff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        /* Canvas background for particles */
        .particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        /* MIDI notes visualization canvas */
        .notes-canvas {
            position: fixed;
            top: 0;
            left: 50%;
            width: 50%;
            height: 100%;
            z-index: 2;
            pointer-events: none;
        }
        
        /* Audio Permission Popup */
        .audio-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #ffffff;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            max-width: 400px;
            text-align: center;
            animation: popupSlideIn 0.4s ease-out;
            border: 1px solid #e0e0e0;
        }
        
        .audio-popup.hidden {
            display: none;
        }
        
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: flex;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }
        
        .popup-overlay.hidden {
            display: none;
        }
        
        .popup-title {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 15px;
        }
        
        .popup-description {
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            color: #666666;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .popup-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
        }
        
        .popup-btn {
            padding: 12px 28px;
            font-family: 'Poppins', sans-serif;
            font-size: 13px;
            font-weight: 600;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .popup-btn.allow {
            background: #1a1a1a;
            color: #ffffff;
        }
        
        .popup-btn.allow:hover {
            background: #333333;
            transform: translateY(-2px);
        }
        
        .popup-btn.deny {
            background: #f0f0f0;
            color: #1a1a1a;
            border: 2px solid #e0e0e0;
        }
        
        .popup-btn.deny:hover {
            background: #e8e8e8;
            transform: translateY(-2px);
        }
        
        /* Music Controls */
        .music-controls {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            gap: 15px;
            z-index: 900;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .music-controls.visible {
            opacity: 1;
        }
        
        .signature {
            color: #131313;
            padding: 10px 16px;
            border-radius: 25px;
            font-family: 'Raleway', sans-serif;
            font-size: 14px;
            font-weight: 400;
            letter-spacing: 1px;
            white-space: nowrap;
        }
        
        .music-status {
            background: #1a1a1a;
            color: #ffffff;
            padding: 12px 18px;
            border-radius: 25px;
            font-family: 'Montserrat', sans-serif;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            min-width: 130px;
            text-align: center;
            opacity: 0.6
        }
        
        /* Music wave animation */
        .music-wave {
            display: flex;
            align-items: center;
            gap: 3px;
            justify-content: center;
        }
        
        .music-bar {
            width: 3px;
            background: #ffffff;
            border-radius: 2px;
            animation: waveAnimation 0.6s ease-in-out infinite;
        }
        
        .music-bar:nth-child(1) {
            height: 6px;
            animation-delay: 0s;
        }
        
        .music-bar:nth-child(2) {
            height: 10px;
            animation-delay: 0.1s;
        }
        
        .music-bar:nth-child(3) {
            height: 14px;
            animation-delay: 0.2s;
        }
        
        .music-bar:nth-child(4) {
            height: 10px;
            animation-delay: 0.3s;
        }
        
        .music-bar:nth-child(5) {
            height: 6px;
            animation-delay: 0.4s;
        }
        
        @keyframes waveAnimation {
            0%, 100% {
                transform: scaleY(1);
            }
            50% {
                transform: scaleY(1.5);
            }
        }
        
        .play-pause-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #333333, #555555);
            border: none;
            color: #ffffff;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        .play-pause-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.3);
        }
        
        .music-credit {
            position: fixed;
            bottom: 10px;
            right: 30px;
            font-family: 'Raleway', sans-serif;
            font-size: 11px;
            color: #999999;
            letter-spacing: 0.5px;
            white-space: nowrap;
            z-index: 900;
        }
        
        .share-btn {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            padding: 12px 28px;
            font-family: 'Poppins', sans-serif;
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: #ffffff;
            background: linear-gradient(135deg, #333333, #555555);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            z-index: 900;
        }
        
        .share-btn:hover {
            transform: translateX(-50%) scale(1.05);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.3);
        }
        
        .share-btn.copied {
            background: linear-gradient(135deg, #4CAF50, #66BB6A);
        }
        
        @keyframes popupSlideIn {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }
        
        .container {
            position: relative;
            width: 100%;
            min-height: 100vh;
            display: flex;
            justify-content: flex-start;
            align-items: flex-start;
            padding-left: 80px;
            padding-top: 100px;
            padding-bottom: 60px;
            background: linear-gradient(120deg, #a8a8a8 0%, #f8f9fa 50%, #e9ebf7 100%);
            overflow-x: hidden;
            z-index: 1;
        }
        
        .animated-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
        }
        
        .content {
            position: relative;
            z-index: 3;
            max-width: 85%;
            animation: slideInFromLeft 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .main-text {
            font-family: 'Playfair Display', serif;
            font-size: clamp(36px, 10vw, 90px);
            font-weight: 900;
            line-height: 1.2;
            letter-spacing: -2px;
            color: #1a1a1a;
            margin-bottom: 30px;
            animation: slideInFromLeft 5s cubic-bezier(0.34, 1.56, 0.64, 1), textGlow 4s ease-in-out infinite 1s;
            position: relative;
        }
        
        .main-text::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 0;
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, #cccccc, #999999, transparent);
            border-radius: 2px;
            opacity: 0;
            animation: slideInFromLeft 1.3s ease-out forwards 0.2s, lineGlow 4s ease-in-out infinite 1.2s;
        }
        
        /* Character hover styles */
        .char {
            position: relative;
            display: inline-block;
            cursor: pointer;
            transition: transform 0.2s ease;
            transform-origin: center bottom;
            animation: letterDissolve 5s ease-out forwards;
        }
        
        /* Per-letter delays are now set inline in JS for accurate timing */
        
        .char:hover {
            transform: scale(1.3);
        }
        
        .char[data-letter="L"]:hover {
            color: #ff0000;
        }
    
        
        .char-tooltip {
            position: absolute;
            bottom: 120%;
            left: 50%;
            transform: translateX(-50%);
            background: #1a1a1a;
            color: #ffffff;
            padding: 8px 12px;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-size: 11px;
            font-weight: 600;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            z-index: 10;
            pointer-events: none;
            max-width: 80px;
            word-wrap: break-word;
            text-align: center;
            line-height: 1.3;
            display: none;
        }
        
        .char:hover .char-tooltip {
            opacity: 1;
            visibility: visible;
        }
        
        .char-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: #1a1a1a;
        }
        
        .divider {
            width: 200px;
            height: 2px;
            background: linear-gradient(90deg, #cccccc, #e0e0e0, transparent);
            margin: 40px 0;
            opacity: 0;
            animation: expandLine 1.5s ease-out forwards 0.3s;
        }
        
        .subtitle {
            font-family: 'Poppins', sans-serif;
            font-size: clamp(12px, 2vw, 18px);
            font-weight: 400;
            color: #666666;
            letter-spacing: 3px;
            margin-bottom: 15px;
            opacity: 0;
            animation: fadeInUp 1s ease-out forwards 0.5s, subtleFloat 3s ease-in-out infinite 1.5s;
            position: relative;
        }
        
        .description {
            font-family: 'Raleway', sans-serif;
            font-size: clamp(12px, 1.5vw, 15px);
            color: #777777;
            line-height: 1.5;
            max-width: 500px;
            margin-top: 20px;
            opacity: 0;
            animation: fadeInUp 1s ease-out forwards 0.7s, descriptionGlow 3.5s ease-in-out infinite 1.7s;
            font-weight: 400;
        }
        
        .clock-container {
            position: fixed;
            right: 100px;
            top: 64%;
            transform: translateY(-50%);
            z-index: 10;
        }
        
        .clock {
            font-family: 'Bodoni Moda', serif;
            font-size: clamp(32px, 8vw, 70px);
            font-weight: 700;
            color: #1a1a1a;
            text-align: right;
            line-height: 1.2;
            letter-spacing: 2px;
            animation: slideInFromRight 1s cubic-bezier(0.34, 1.56, 0.64, 1), textGlow 4s ease-in-out infinite 1s;
            position: relative;
        }
        
        .clock-dissolve {
            animation: letterDissolve 0.8s ease-out forwards !important;
        }
        
        .cta-button {
            display: inline-block;
            margin-top: 40px;
            padding: 16px 48px;
            font-family: 'Poppins', sans-serif;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #ffffff;
            background: linear-gradient(135deg, #333333, #555555);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            opacity: 0;
            animation: fadeInUp 1s ease-out forwards 0.9s;
            position: relative;
            overflow: hidden;
        }
        
        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a1a, #444444);
            transition: left 0.3s ease;
            z-index: -1;
        }
        
        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.25);
        }
        
        .cta-button:hover::before {
            left: 0;
        }
        
        /* Animated blobs */
        .blob {
            position: absolute;
            border-radius: 50%;
            opacity: 0.03;
            filter: blur(60px);
        }
        
        .blob1 {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, #cccccc, #999999);
            top: -250px;
            right: -250px;
            animation: float 20s ease-in-out infinite;
        }
        
        .blob2 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, #e0e0e0, #b0b0b0);
            bottom: -200px;
            left: -200px;
            animation: float 25s ease-in-out infinite 3s;
        }
        
        .blob3 {
            width: 450px;
            height: 450px;
            background: radial-gradient(circle, #d0d0d0, #a0a0a0);
            bottom: 100px;
            right: -100px;
            animation: float 22s ease-in-out infinite 1.5s;
        }
        
        /* Animations */
        @keyframes slideInFromLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideInFromRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes textGlow {
            0%, 100% {
                text-shadow: 0 0 20px rgba(200, 200, 200, 0.3);
            }
            50% {
                text-shadow: 0 0 40px rgba(180, 180, 180, 0.5);
            }
        }
        
        @keyframes lineGlow {
            0%, 100% {
                opacity: 0.4;
                box-shadow: 0 0 8px rgba(150, 150, 150, 0.3);
            }
            50% {
                opacity: 0.8;
                box-shadow: 0 0 15px rgba(130, 130, 130, 0.5);
            }
        }
        
        @keyframes textBreathe {
            0%, 100% {
                letter-spacing: -2px;
                opacity: 1;
            }
            50% {
                letter-spacing: -1.5px;
                opacity: 0.95;
            }
        }
        
        @keyframes subtleFloat {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-3px);
            }
        }
        
        @keyframes descriptionGlow {
            0%, 100% {
                color: #777777;
                text-shadow: 0 0 10px rgba(200, 200, 200, 0);
            }
            50% {
                color: #666666;
                text-shadow: 0 0 15px rgba(180, 180, 180, 0.2);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes letterDissolve {
            0% {
                opacity: 0;
                transform: scale(0.5) translateY(20px);
                filter: blur(10px);
            }
            50% {
                filter: blur(5px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
                filter: blur(0);
            }
        }
        
        @keyframes expandLine {
            from {
                width: 0;
                opacity: 0;
            }
            to {
                width: 200px;
                opacity: 1;
            }
        }
        
        @keyframes float {
            0%, 100% {
                transform: translate(0, 0) scale(1);
            }
            25% {
                transform: translate(30px, -30px) scale(1.05);
            }
            50% {
                transform: translate(-20px, 20px) scale(0.95);
            }
            75% {
                transform: translate(20px, 30px) scale(1.05);
            }
        }
        
        @keyframes gradientShift {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }
        
        /* Immersive Music Experience Animations */
        @keyframes fadeToBlack {
            from {
                background: linear-gradient(120deg, #a8a8a8 0%, #f8f9fa 50%, #e9ebf7 100%);
            }
            to {
                background: #000000;
            }
        }
        
        @keyframes fadeFromBlack {
            from {
                background: #000000;
            }
            to {
                background: linear-gradient(120deg, #a8a8a8 0%, #f8f9fa 50%, #e9ebf7 100%);
            }
        }
        
        @keyframes charColorTransition {
            from {
                color: #1a1a1a;
            }
            to {
                color: #ff0000;
            }
        }
        
        @keyframes blink {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0;
            }
        }
        
        .char-love-blink {
            animation: blink 0.6s ease-in-out infinite !important;
        }
        
        .container.dark-mode {
            animation: fadeToBlack 5s ease-out forwards;
        }
        
        .container.light-mode {
            animation: fadeFromBlack 5s ease-out forwards;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding-left: 40px;
                padding-right: 20px;
                padding-bottom: 150px;
                justify-content: center;
            }
            
            .content {
                max-width: 95%;
            }
            
            .main-text {
                letter-spacing: -1px;
            }
            
            .description {
                max-width: 100%;
            }
            
            .clock-container {
                right: 20px;
                top: 20px;
                transform: none;
            }
            
            .clock {
                font-size: clamp(24px, 6vw, 50px);
            }
            
            .music-controls {
                bottom: 80px;
                right: 20px;
                gap: 10px;
                flex-wrap: wrap;
                justify-content: flex-end;
            }
            
            .signature {
                background: #1a1a1a;
                color: #ffffff;
                padding: 8px 12px;
                border-radius: 20px;
                font-family: 'Raleway', sans-serif;
                font-size: 10px;
                font-weight: 400;
                letter-spacing: 0.5px;
                white-space: nowrap;
                order: 3;
            }
            
            .music-status {
                background: #1a1a1a;
                color: #ffffff;
                padding: 8px 12px;
                border-radius: 20px;
                font-family: 'Montserrat', sans-serif;
                font-size: 10px;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                min-width: 80px;
                text-align: center;
                order: 2;
            }
            
            .play-pause-btn {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                background: linear-gradient(135deg, #333333, #555555);
                border: none;
                color: #ffffff;
                font-size: 16px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.3s ease;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
                order: 1;
            }
            
            .music-credit {
                bottom: 120px;
                right: 20px;
                font-size: 9px;
            }
            
            .share-btn {
                bottom: 15px;
                padding: 10px 20px;
                font-size: 11px;
                letter-spacing: 1px;
            }
            
            .share-btn:hover {
                transform: translateX(-50%) scale(1.03);
            }
        }
    </style>
</head>

<body>
    <!-- Music Controls -->
    <div class="music-controls" id="musicControls" style="opacity: 1;">
        <div class="signature">crafted with love</div>
        <div class="music-status" id="musicStatus">Music: Off</div>
        <button class="play-pause-btn" id="playPauseBtn">▶</button>
    </div>
    
    <!-- Music Credit -->
    <div class="music-credit">Yiruma</div>
    
    <!-- Share Button -->
    <button class="share-btn" id="shareBtn">Share This Page</button>
    
    <!-- Hidden Audio Element -->
    <audio id="audioPlayer" preload="none"></audio>
    
    <!-- Animated Background Blobs -->
    <div class="animated-bg">
        <div class="blob blob1"></div>
        <div class="blob blob2"></div>
        <div class="blob blob3"></div>
    </div>

    <!-- MIDI Notes Canvas -->
    <canvas id="notesCanvas" class="notes-canvas"></canvas>
   

    <!-- Main Content -->
    <div class="container">
        <div class="content">
            <h1 class="main-text">
                MOST DAYS<br>FEEL SMALL.<br>THEY STILL<br>BECOME OUR LIFE.
            </h1>
            
            <div class="divider"></div>
            
            <p class="subtitle" id="season">Show Love</p>
            
            <p class="description">
                The small moments accumulate. Every seemingly insignificant day<br>
                weaves into the fabric of your life. Choose wisely.
            </p>
            
        </div>
    </div>
    
    <!-- Clock Display -->
    <div class="clock-container">
        <div class="clock" id="clock">Today</div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@tonejs/midi@2.0.28/build/Midi.min.js"></script>
    <script>
        // ============ Interactive Character Tooltips ============
        
        const charTooltips = {
            'M': 'Meaningful',
            'O': 'Observe',
            'S': 'Smile',
            'T': 'Treasure',
            'D': 'Dream',
            'A': 'Appreciate',
            'Y': 'Yearn',
            'F': 'Feel',
            'E': 'Embrace',
            'L': 'Love',
            'H': 'Hope',
            'C': 'Care',
            'R': 'Remember',
            'B': 'Believe',
            'U': 'Understand',
            'I': 'Inspire',
            'V': 'Value',
            'W': 'Wonder',
            'N': 'Nurture'
        };
        
        function wrapCharactersWithTooltips() {
            const mainText = document.querySelector('.main-text');
            let htmlContent = mainText.innerHTML;
            
            // Preserve the structure by only wrapping letter characters
            let newHTML = '';
            let letterIndex = 0;
            
            for (let char of htmlContent) {
                if (/[A-Z]/.test(char)) {
                    const tooltip = charTooltips[char] || char;
                    const delay = (letterIndex * 0.06 + 0.1).toFixed(2);
                    newHTML += `<span class="char" data-letter="${char}" style="animation-delay: ${delay}s;">${char}<div class="char-tooltip">${tooltip}</div></span>`;
                    letterIndex++;
                } else {
                    newHTML += char;
                }
            }
            
            mainText.innerHTML = newHTML;
        }
        
        // Run on page load
        document.addEventListener('DOMContentLoaded', wrapCharactersWithTooltips);
        
        // ============ End Character Tooltips ============
        
        // ============ Audio Music Controls ============
        
        const audioPlayer = document.getElementById('audioPlayer');
        const musicControls = document.getElementById('musicControls');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const musicStatus = document.getElementById('musicStatus');
        
        let isPlaying = false;
        let showWave = false;
        
        // Initialize audio player
        audioPlayer.src = 'Yiruma_-_River_Flows_in_You_256kbps.mp3';
        audioPlayer.volume = 0.5;
        audioPlayer.loop = true;
        
        // Make controls visible immediately
        musicControls.classList.add('visible');
        
        // Toggle between "Music: On" text and wave animation every 5 seconds
        setInterval(() => {
            showWave = !showWave;
            if (showWave) {
                musicStatus.innerHTML = '<div class="music-wave"><div class="music-bar"></div><div class="music-bar"></div><div class="music-bar"></div><div class="music-bar"></div><div class="music-bar"></div></div>';
            } else {
                musicStatus.textContent = 'River Flows in You';
            }
        }, 5000);
        
        // Play/Pause button functionality
        playPauseBtn.addEventListener('click', () => {
            if (isPlaying) {
                audioPlayer.pause();
                isPlaying = false;
                playPauseBtn.textContent = '▶';
                musicStatus.textContent = 'Music: Off';
                showWave = false;
                
                // Reverse the immersive mode
                const container = document.querySelector('.container');
                container.classList.remove('dark-mode');
                container.classList.add('light-mode');
                
                // Remove red color from LOVE characters
                setTimeout(() => {
                    document.querySelectorAll('.char').forEach(char => {
                        char.classList.remove('char-love-blink');
                        char.style.color = '#1a1a1a';
                    });
                }, 5000);
            } else {
                audioPlayer.play();
                isPlaying = true;
                playPauseBtn.textContent = '⏸';
                musicStatus.textContent = 'Music: On';
                
                // Start immersive mode experience
                const container = document.querySelector('.container');
                container.classList.remove('light-mode');
                container.classList.add('dark-mode');
                
                // After 2 seconds: Change specific characters to red (L, O, U->V, E) and show only LOVE
                setTimeout(() => {
                    const chars = document.querySelectorAll('.char');
                    
                    // Text: MOST DAYS FEEL SMALL THEY STILL BECOME OUR LIFE
                    // Letter count (no spaces/breaks): M-O-S-T-D-A-Y-S-F-E-E-L-S-M-A-L-L-T-H-E-Y-S-T-I-L-L-B-E-C-O-M-E-O-U-R-L-I-F-E
                    // L in FEEL = 12, O in BECOME = 30, U in OUR = 34, E in LIFE = 39
                    
                    let letterCount = 0;
                    chars.forEach((char, index) => {
                        const letter = char.getAttribute('data-letter');
                        
                        // Count actual letters for mapping
                        if (letter) {
                            letterCount++;
                            
                            // Target characters at positions: 12, 30, 34, 39
                            if (letterCount === 12 || letterCount === 30 || letterCount === 34 || letterCount === 39) {
                                // Change character to red and start blinking
                                char.style.color = '#ff0000';
                                char.classList.add('char-love-blink');
                                
                                // Change U to V at position 34
                                if (letterCount === 34 && letter === 'U') {
                                    char.textContent = 'V';
                                }
                            } else {
                                // Fade other characters (hide them by making text color match background)
                                char.style.color = '#000000';
                            }
                        }
                    });
                }, 2000);
                
                // After 5 seconds total: Stop blinking, keep LOVE visible in red, start reverse
                setTimeout(() => {
                    // Keep LOVE in red but stop blinking
                    document.querySelectorAll('.char.char-love-blink').forEach(char => {
                        char.classList.remove('char-love-blink');
                        char.style.color = '#ff0000';
                    });
                    
                    // Start reverse animation (background returns to normal)
                    const container = document.querySelector('.container');
                    container.classList.remove('dark-mode');
                    container.classList.add('light-mode');
                }, 5000);
                
                // After 10 seconds total: Return everything to normal
                setTimeout(() => {
                    document.querySelectorAll('.char').forEach(char => {
                        char.style.color = '#1a1a1a';
                        char.classList.remove('char-love-blink');
                        const letter = char.getAttribute('data-letter');
                        // Restore U in OUR (was changed to V)
                        if (char.textContent === 'V' && letter === 'U') {
                            char.textContent = 'U';
                        }
                    });
                }, 10000);
            }
        });
        
        // ============ End Audio Controls ============
        
        // ============ Share Button Functionality ============
        
        const shareBtn = document.getElementById('shareBtn');
        
        shareBtn.addEventListener('click', () => {
            const pageUrl = window.location.href;
            const shareText = `Find love in small moments : ${pageUrl}`;
            
            // Copy to clipboard
            navigator.clipboard.writeText(shareText).then(() => {
                // Change button appearance temporarily
                const originalText = shareBtn.textContent;
                shareBtn.textContent = 'Copied! Thank you. Crafted by Sushanth';
                shareBtn.classList.add('copied');
                
                // Reset after 2 seconds
                setTimeout(() => {
                    shareBtn.textContent = originalText;
                    shareBtn.classList.remove('copied');
                }, 2000);
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = shareText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                // Change button appearance temporarily
                const originalText = shareBtn.textContent;
                shareBtn.textContent = 'Copied!';
                shareBtn.classList.add('copied');
                
                setTimeout(() => {
                    shareBtn.textContent = originalText;
                    shareBtn.classList.remove('copied');
                }, 2000);
            });
        });
        
        // ============ End Share Button ============
        
        const clockElement = document.getElementById('clock');
        const phrases = [
            'Today',
            'Together',
            'Still Here',
            'With You',
            'Right Now',
            'This Moment',
            'Here & Now',
            'Always',
            'Forever',
            'In This',
            'Be Here',
            'Just Now',
            'This Time',
            'Exist',
            'Present',
            'Love Now',
            'Feel It',
            'Breathe In'
        ];
        
        let phraseIndex = 0;
        
        // Update phrase every 2 seconds
        setInterval(() => {
            phraseIndex = (phraseIndex + 1) % phrases.length;
            
            // Remove animation class to reset it
            clockElement.classList.remove('clock-dissolve');
            
            // Trigger reflow to restart animation
            void clockElement.offsetWidth;
            
            // Add animation class
            clockElement.classList.add('clock-dissolve');
            clockElement.textContent = phrases[phraseIndex];
        }, 5000);
        
        // ============ End Dynamic Phrases ============
        
        // Create animated particle background
        const canvas = document.createElement('canvas');
        canvas.className = 'particle-canvas';
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        document.body.insertBefore(canvas, document.body.firstChild);
        
        const ctx = canvas.getContext('2d');
        const particles = [];
        
        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 2 + 0.5;
                this.speedX = (Math.random() - 0.5) * 0.5;
                this.speedY = (Math.random() - 0.5) * 0.5;
                this.opacity = Math.random() * 0.5 + 0.1;
            }
            
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                
                if (this.x > canvas.width) this.x = 0;
                if (this.x < 0) this.x = canvas.width;
                if (this.y > canvas.height) this.y = 0;
                if (this.y < 0) this.y = canvas.height;
            }
            
            draw() {
                ctx.fillStyle = `rgba(150, 150, 150, ${this.opacity * 0.3})`;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        
        // Initialize particles
        for (let i = 0; i < 60; i++) {
            particles.push(new Particle());
        }
        
        // Animation loop
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            particles.forEach(particle => {
                particle.update();
                particle.draw();
            });
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        // Handle window resize
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // ============ MIDI Notes Visualization ============
        const notesCanvas = document.getElementById('notesCanvas');
        const notesCtx = notesCanvas.getContext('2d');
        const midiUrl = 'riverflowsmid.mid';

        let midiNotes = [];
        let notesReady = false;
        let midiMin = 0;
        let midiMax = 127;
        let notesAnimationId = null;
        let midiDuration = 0;
        let audioDuration = 0;
        let midiTimeScale = 1;

        const visualConfig = {
            secondsPerScreen: 6,
            noteWidth: 14,
            minNoteHeight: 8,
            noteOpacity: 0.22,
            leadInSeconds: 0.0,
            playheadBandHeight: 26,
            timeOffsetSeconds: 0.0,
            lanePadding: 16,
            glowStrength: 18,
            heartEverySeconds: 10,
            heartDurationSeconds: 0.9,
            heartChance: 0.4
        };

        let lastHeartTrigger = 0;
        let heartActiveUntil = 0;

        function resizeNotesCanvas() {
            notesCanvas.width = Math.floor(window.innerWidth / 2);
            notesCanvas.height = window.innerHeight;
        }

        resizeNotesCanvas();

        function getActiveNoteIndex(currentTime) {
            let closestIndex = -1;
            let closestDelta = Infinity;
            for (let i = 0; i < midiNotes.length; i++) {
                const note = midiNotes[i];
                const noteStart = note.time;
                const noteMid = noteStart + note.duration / 2;
                const delta = Math.abs(noteMid - currentTime);
                if (delta < closestDelta) {
                    closestDelta = delta;
                    closestIndex = i;
                }
            }
            return closestIndex;
        }

        function getCurrentMidiTime() {
            const audioTime = audioPlayer.currentTime + visualConfig.timeOffsetSeconds;
            return Math.max(0, audioTime * midiTimeScale + visualConfig.leadInSeconds);
        }

        function maybeTriggerHeart(nowSeconds) {
            if (nowSeconds - lastHeartTrigger < visualConfig.heartEverySeconds) {
                return;
            }
            lastHeartTrigger = nowSeconds;
            if (Math.random() <= visualConfig.heartChance) {
                heartActiveUntil = nowSeconds + visualConfig.heartDurationSeconds;
            }
        }

        function drawSmallHeart(ctx, cx, cy, size) {
            ctx.beginPath();
            ctx.moveTo(cx, cy + size * 0.4);
            ctx.bezierCurveTo(cx + size, cy - size * 0.2, cx + size * 0.7, cy - size, cx, cy - size * 0.5);
            ctx.bezierCurveTo(cx - size * 0.7, cy - size, cx - size, cy - size * 0.2, cx, cy + size * 0.4);
            ctx.closePath();
            ctx.fill();
        }

        function drawNotes() {
            notesAnimationId = null;
            if (!notesReady) {
                notesAnimationId = requestAnimationFrame(drawNotes);
                return;
            }

            const width = notesCanvas.width;
            const height = notesCanvas.height;
            const centerY = height / 2;
            const pixelsPerSecond = height / visualConfig.secondsPerScreen;
            const currentTime = getCurrentMidiTime();
            const nowSeconds = audioPlayer.currentTime;

            notesCtx.clearRect(0, 0, width, height);

            maybeTriggerHeart(nowSeconds);
            const heartActive = nowSeconds <= heartActiveUntil;

            const activeIndex = getActiveNoteIndex(currentTime);

            for (let i = 0; i < midiNotes.length; i++) {
                const note = midiNotes[i];
                const noteMid = note.time + note.duration / 2;
                const relativeTime = noteMid - currentTime;
                const y = centerY + relativeTime * pixelsPerSecond;

                if (y < -40 || y > height + 40) {
                    continue;
                }

                const velocityBoost = Math.max(0.6, note.velocity || 0.7);
                const noteWidth = visualConfig.noteWidth * (0.9 + velocityBoost * 0.6);
                const noteHeight = Math.max(visualConfig.minNoteHeight, note.duration * pixelsPerSecond * 0.6) * (0.7 + velocityBoost * 0.6);
                const midiRange = Math.max(1, midiMax - midiMin);
                const x = ((note.midi - midiMin) / midiRange) * (width - visualConfig.lanePadding * 2);
                const drawX = visualConfig.lanePadding + Math.min(width - noteWidth - visualConfig.lanePadding, Math.max(0, x));
                const drawY = y - noteHeight / 2;

                if (i === activeIndex) {
                    notesCtx.fillStyle = '#000000';
                    notesCtx.shadowBlur = 0;
                    notesCtx.fillRect(drawX, drawY, noteWidth, noteHeight);

                    if (heartActive) {
                        const cx = drawX + noteWidth / 2;
                        const cy = drawY + noteHeight / 2;
                        const size = Math.min(noteWidth, noteHeight) * 0.45;
                        notesCtx.fillStyle = '#ffffff';
                        drawSmallHeart(notesCtx, cx, cy, size);
                        notesCtx.fillStyle = '#000000';
                    }
                } else {
                    const alpha = Math.min(0.6, visualConfig.noteOpacity + velocityBoost * 0.18);
                    notesCtx.fillStyle = `rgba(0, 0, 0, ${alpha})`;
                    notesCtx.fillRect(drawX, drawY, noteWidth, noteHeight);
                }
            }

            notesCtx.shadowBlur = 0;

            if (!audioPlayer.paused) {
                notesAnimationId = requestAnimationFrame(drawNotes);
            }
        }

        function updateMidiSync() {
            if (midiDuration > 0 && audioDuration > 0) {
                midiTimeScale = midiDuration / audioDuration;
            } else {
                midiTimeScale = 1;
            }
        }

        async function loadMidiNotes() {
            try {
                const response = await fetch(midiUrl);
                const arrayBuffer = await response.arrayBuffer();
                const midi = new Midi(arrayBuffer);

                midiNotes = [];
                midi.tracks.forEach(track => {
                    track.notes.forEach(note => {
                        midiNotes.push({
                            time: note.time,
                            duration: note.duration,
                            midi: note.midi,
                            velocity: note.velocity
                        });
                    });
                });

                midiNotes.sort((a, b) => a.time - b.time);
                midiMin = midiNotes.reduce((min, note) => Math.min(min, note.midi), 127);
                midiMax = midiNotes.reduce((max, note) => Math.max(max, note.midi), 0);
                midiDuration = midiNotes.reduce((max, note) => Math.max(max, note.time + note.duration), 0);
                updateMidiSync();
                notesReady = true;
            } catch (err) {
                console.error('Failed to load MIDI:', err);
            }
        }

        window.addEventListener('resize', resizeNotesCanvas);

        // Load MIDI and start visualization
        loadMidiNotes();
        drawNotes();

        function startNotesAnimation() {
            if (notesAnimationId === null && !audioPlayer.paused) {
                notesAnimationId = requestAnimationFrame(drawNotes);
            }
        }

        function stopNotesAnimation() {
            if (notesAnimationId !== null) {
                cancelAnimationFrame(notesAnimationId);
                notesAnimationId = null;
            }
            drawNotes();
        }

        audioPlayer.addEventListener('loadedmetadata', () => {
            audioDuration = audioPlayer.duration || 0;
            updateMidiSync();
        });
        audioPlayer.addEventListener('play', startNotesAnimation);
        audioPlayer.addEventListener('pause', stopNotesAnimation);
        audioPlayer.addEventListener('ended', stopNotesAnimation);
        audioPlayer.addEventListener('seeked', () => {
            if (audioPlayer.paused) {
                drawNotes();
            }
        });
        // ============ End MIDI Notes Visualization ============
     
    </script>
</body>
</html>
